{% extends "base.html" %}

{% block content %}

  <div>
    <a href="/admin">Admin</a> &raquo; <a href="/admin/users">Users</a> &raquo; <span>{{ user.id }}</span>
  </div>

  <div>
    <h2>User Profile</h2>
    <h3>{{ user.full_name }}</h3>
    <p>{{ user.email }}</p>

    <form method="POST" action="{{ action }}">
        {{ user_form.csrf_token }}

        <p>
        {{ user_form.full_name.label }} {{ user_form.full_name(class="css_class") }}
        {% if user_form.full_name.errors %}
            <ul class="errors">{% for error in user_form.full_name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        <p>
        {{ user_form.email.label }} {{ user_form.email(class="css_class") }}
        {% if user_form.email.errors %}
            <ul class="errors">{% for error in user_form.email.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        {% if request.user.is_superuser %}

        <p>
        {{ user_form.is_superuser.label }} {{ user_form.is_superuser(class="css_class") }}
        {% if user_form.is_superuser.errors %}
            <ul class="errors">{% for error in user_form.is_superuser.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        <p>
        {{ user_form.is_active.label }} {{ user_form.is_active(class="css_class") }}
        {% if user_form.is_active.errors %}
            <ul class="errors">{% for error in user_form.is_active.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        {% endif %}

        <input type="submit" name="user-info" value="Update"/>
    </form>

    {% if request.user.is_superuser %}
    <hr/>
    <h3>Password reset</h3>
    <form method="POST" action="{{ action }}">
        <input type="submit" name="password-reset" value="Reset password" />
    </form>
    {% endif %}

    <hr/>
    <h3>Password change</h3>
    <form method="POST" action="{{ action }}">
      {{ password_form.csrf_token }}

      <p>
      {{ password_form.new_password.label }} {{ password_form.new_password(class="css_class") }}
      {% if password_form.new_password.errors %}
        <ul class="errors">{% for error in password_form.new_password.errors %}<li>{{ error }}</li>{% endfor %}</ul>
      {% endif %}
      </p>
      <p>
      {{ password_form.retype_password.label }} {{ password_form.retype_password(class="css_class") }}
      {% if password_form.retype_password.errors %}
        <ul class="errors">{% for error in password_form.retype_password.errors %}<li>{{ error }}</li>{% endfor %}</ul>
      {% endif %}
      </p>
      <input type="submit" name="password-change" value="Change password"/>
    </form>

  </div>

{% endblock content %}
