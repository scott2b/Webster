<!doctype html>
<html>
<head>
	<title>Update user profile</title>
    <link href="/static/site.css" rel="stylesheet">
</head>
<body>

<section id="banner">
  {% if request.session.messages %}
  <div class="messages">
    {% include "_messages.html" %}
  </div>
  {% endif %}
</section>

<section id="page">

  {% include "_nav.html" %}

  <div class="console">
    <h2>User Profile</h2>
      <div>
        {{ user.email }}: {{ user.full_name }}
      </div>

    <form method="POST" action="{{ action }}">
        {{ user_form.csrf_token }}

        <p>
        {{ user_form.full_name.label }}: {{ user_form.full_name(class="css_class") }}
        {% if user_form.full_name.errors %}
            <ul class="errors">{% for error in user_form.full_name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        <p>
        {{ user_form.email.label }}: {{ user_form.email(class="css_class") }}
        {% if user_form.email.errors %}
            <ul class="errors">{% for error in user_form.email.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>

        {% if request.user.is_superuser %}
        <p>
        {{ user_form.is_superuser.label }}: {{ user_form.is_superuser(class="css_class") }}
        {% if user_form.is_superuser.errors %}
            <ul class="errors">{% for error in user_form.is_superuser.errors %}<li>{{ error }}</li>{% endfor %}</ul>
        {% endif %}
        </p>
        {% endif %}

        <input type="submit" name="user-info" value="Update"/>
    </form>

    <hr/>
    <h3>Password change:</h3>
    <form method="POST" action="{{ action }}">
      {{ password_form.csrf_token }}
      <p>
      {{ password_form.current_password.label }}: {{ password_form.current_password(class="css_class") }}
      {% if password_form.current_password.errors %}
        <ul class="errors">{% for error in password_form.current_password.errors %}<li>{{ error }}</li>{% endfor %}</ul>
      {% endif %}
      </p>
      <p>
      {{ password_form.new_password.label }}: {{ password_form.new_password(class="css_class") }}
      {% if password_form.new_password.errors %}
        <ul class="errors">{% for error in password_form.new_password.errors %}<li>{{ error }}</li>{% endfor %}</ul>
      {% endif %}
      </p>
      <p>
      {{ password_form.retype_password.label }}: {{ password_form.retype_password(class="css_class") }}
      {% if password_form.retype_password.errors %}
        <ul class="errors">{% for error in password_form.retype_password.errors %}<li>{{ error }}</li>{% endfor %}</ul>
      {% endif %}
      </p>
      <input type="submit" name="password-change" value="Change password"/>
    </form>

  </div>
</section>
</body>
